<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>The Journey of the Lion and the Horse</title>
  <!-- Fancier book-style font from Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Merriweather&display=swap" rel="stylesheet">
  <style>
    /* Basic reset and layout with our new font */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    html, body {
      width: 100%;
      height: 100%;
      font-family: 'Merriweather', serif;
      overflow: hidden;
      background: transparent; /* global background is handled by #globalBackground */
    }
    /* Global background element: fills the entire viewport */
    #globalBackground {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-position: center;
      background-repeat: no-repeat;
      background-size: 100%; /* adjustable via slider */
      filter: blur(10px);
      z-index: -2;
      clip-path: inset(0); /* clip the edges to avoid white borders when blurred */
      transition: background-size 0.3s, filter 0.3s;
    }
    /* Global noise overlay (using a repeated noise texture) */
    #globalNoise {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABKElEQVR42mNgoBvo6en/6+vr+0WbN/A8N+4uLi/w8fH3//Pj+/fv/6YmJgEYGJ4WZmZtLJ+9evX3//fv/6Y8M/f//9v//v/+PNR0dH/Q8vLy/4+Pj//78//38/fv/6aMiIiP+5evX/n59+3/fv3+fT17+/fv/5+fn/ff3/6egkJCQ/A8MzP+/fv/9u3b/zz//z+4uLi/+PDw/fv/9+/fv/68OHD/AAQE+/fv/8YGBgF3BwcH/A4vLx/9/fv/6+vr/+PHj/+vXr/9vXr/6ZmZmP8PNzc/9+vX/6empo/+Ojo/8fHx/+Pn78/9+8Dg7O/+Pn78P6zs7P8NLS0v///8DExM/Px8/fv/8/Pz//8/Pn78/fv/9u3b/zz/ALwAYfNUHzrlzAAAAAElFTkSuQmCC');
      background-repeat: repeat;
      opacity: 0.5;
      pointer-events: none;
      mix-blend-mode: overlay;
      z-index: -1;
      transition: opacity 0.3s;
    }
    /* Control panel for background adjustments */
    #controlPanel {
      position: fixed;
      bottom: 10px;
      left: 10px;
      background: rgba(255,255,255,0.8);
      padding: 10px;
      border-radius: 5px;
      font-size: 0.9rem;
      z-index: 1000;
    }
    #controlPanel label {
      display: block;
      margin-bottom: 5px;
    }
    #controlPanel input {
      width: 100%;
    }
    /* Game container */
    #game {
      position: relative;
      width: 100%;
      height: 100%;
      z-index: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }
    /* Scene container for main content */
    .scene {
      display: flex;
      flex-direction: column;
      width: 100%;
      max-width: 900px;
      min-height: 80vh;
      border-radius: 10px;
      padding: 20px;
      color: #333;
      z-index: 2;
      background: rgba(255, 255, 255, 0.9);
      box-shadow: 0 2px 8px rgba(0,0,0,0.3);
      overflow: auto;
    }
    /* Content area expands to push nav buttons to the bottom */
    .scene-content {
      flex: 1;
      font-size: 1.1rem;
      line-height: 1.6;
      text-align: left;
      margin-bottom: 20px;
    }
    /* 16:9 image placeholder for scene content (foreground) */
    .scene-img {
      width: 100%;
      aspect-ratio: 16 / 9;
      object-fit: cover;
      border-radius: 5px;
      margin-bottom: 20px;
      position: relative;
      z-index: 3;
    }
    /* Navigation buttons container locked to the bottom */
    .nav-buttons {
      margin-top: auto;
      display: flex;
      justify-content: space-between;
      gap: 10px;
      position: relative;
      z-index: 3;
    }
    /* Navigation button styles with cute arrow SVGs */
    .nav-buttons button {
      flex: 1;
      padding: 10px;
      font-size: 1rem;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      background-color: #ffb6c1;
      color: #fff;
      box-shadow: 0 2px 4px rgba(0,0,0,0.3);
      transition: background-color 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .nav-buttons button:hover:not(:disabled) {
      background-color: #ff9aa2;
    }
    .nav-buttons button:disabled {
      background-color: #fcd5ce;
      cursor: not-allowed;
    }
    /* SVG arrow icons styling */
    .nav-buttons svg {
      width: 24px;
      height: 24px;
      fill: none;
      stroke: #fff;
      stroke-width: 2;
      stroke-linecap: round;
      stroke-linejoin: round;
      filter: drop-shadow(0 2px 2px rgba(0,0,0,0.2));
    }
    /* Audio player styling */
    #audioPlayer {
      position: fixed;
      bottom: 60px; /* positioned above the control panel */
      left: 50%;
      transform: translateX(-50%);
      background: rgba(255,255,255,0.9);
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.3);
      padding: 10px 20px;
      display: flex;
      align-items: center;
      gap: 10px;
      z-index: 1000;
    }
    #audioPlayer button {
      border: none;
      background: #ffb6c1;
      padding: 8px;
      border-radius: 5px;
      cursor: pointer;
      transition: background 0.3s;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 2px 4px rgba(0,0,0,0.3);
    }
    #audioPlayer button:hover {
      background: #ff9aa2;
    }
    #audioPlayer svg {
      width: 20px;
      height: 20px;
      fill: none;
      stroke: #fff;
      stroke-width: 2;
      stroke-linecap: round;
      stroke-linejoin: round;
      filter: drop-shadow(0 1px 1px rgba(0,0,0,0.2));
    }
    #audioPlayer input[type="range"] {
      width: 100px;
    }
  </style>
</head>
<body>
  <!-- Global background elements -->
  <div id="globalBackground"></div>
  <div id="globalNoise"></div>

  <div id="game"></div>

  <!-- Audio Player (UI only, no audio functionality) -->
  <div id="audioPlayer">
    <button id="goStart">
      <!-- Double left arrow SVG -->
      <svg viewBox="0 0 24 24"><polyline points="11 18 5 12 11 6"></polyline><polyline points="18 18 12 12 18 6"></polyline></svg>
    </button>
    <button id="playBtn">
      <!-- Play icon SVG -->
      <svg viewBox="0 0 24 24"><polygon points="5,3 19,12 5,21"></polygon></svg>
    </button>
    <button id="pauseBtn">
      <!-- Pause icon SVG -->
      <svg viewBox="0 0 24 24"><rect x="6" y="4" width="4" height="16"></rect><rect x="14" y="4" width="4" height="16"></rect></svg>
    </button>
    <button id="goEnd">
      <!-- Double right arrow SVG -->
      <svg viewBox="0 0 24 24"><polyline points="13 18 19 12 13 6"></polyline><polyline points="6 18 12 12 6 6"></polyline></svg>
    </button>
    <input type="range" id="volumeSlider" min="0" max="1" step="0.01" value="0.5">
  </div>

  <!-- Control panel for background adjustments -->
  <div id="controlPanel">
    <label>Zoom: <input type="range" id="zoomSlider" min="0.5" max="6" step="0.01" value="1"></label>
    <label>Blur: <input type="range" id="blurSlider" min="0" max="100" step="1" value="10"></label>
    <label>Noise: <input type="range" id="noiseSlider" min="0" max="1" step="0.01" value="0.5"></label>
  </div>

  <script>
    let currentScene = 0;
    let chaseComplete = false; // Flag for the chase minigame completion

    // Array of scene objects.
    // Each object includes the image filename and the full, verbatim story content.
    // (AI image prompts for each scene are included as comments for your reference.)
    const scenes = [
      {
        image: "scene0.jpg",
        content: `
          <h1 style="text-align:center;">The Journey of the Lion and the Horse</h1>
          <p style="text-align:center;">An interactive adventure</p>
        `
        // AI Prompt for scene0: "A whimsical modern digital illustration for a children’s book cover featuring a majestic lion and a graceful horse set in a magical landscape with soft warm colors and detailed, playful style."
      },
      {
        image: "scene1.jpg",
        content: `
          <p>In a land where the sun burned hot during the day and the moon cast silver light at night, there lived a lion. He was not just any lion—he was the strongest animal in history. His mane was thick like storm clouds, his muscles were carved by battles long forgotten, and his roar could shake the very trees. Every beast in the land knew his name, whispered in fear and awe.</p>
        `
        // AI Prompt for scene1: "A detailed digital drawing in a children’s book style of a powerful lion with a thick, storm-cloud-like mane standing in a sunlit savanna, exuding strength and awe, rendered in vibrant, modern colors."
      },
      {
        image: "scene2.jpg",
        content: `
          <p>But time had passed, and the world had changed. The lion no longer had battles to fight. The land was quiet now. The creatures who once bowed to him had moved on, living without fear. And so, the lion sat beneath an ancient tree, watching the world pass by, still powerful, yet alone.</p>
        `
        // AI Prompt for scene2: "A gentle digital illustration of a majestic lion sitting alone beneath an ancient tree in a quiet, sun-drenched landscape, with soft, nostalgic colors and a modern children's book charm."
      },
      {
        image: "scene3.jpg",
        content: `
          <p>One day, from far beyond the savanna, a new presence arrived. Her coat shimmered like polished silver, her legs moved with the speed of the wind itself. She was a horse—the strongest animal of today. She did not fight wars, did not roar to make her presence known. Yet wherever she ran, the world moved with her. She was speed, freedom, and strength of a different kind.</p>
        `
        // AI Prompt for scene3: "A dynamic digital illustration in a children’s book style of a sleek, silver-coated horse galloping into view on a vibrant savanna, with a sense of motion, freedom, and modern detail."
      },
      {
        image: "scene4.jpg",
        content: `
          <p>The lion watched as she approached, her hooves barely touching the ground. He expected her to stop, to bow her head as others had before. But she did not. Instead, she simply met his gaze, her eyes filled with something he had never seen before—curiosity, not fear.</p>
        `
        // AI Prompt for scene4: "A tender digital drawing in a modern children’s book style showing a majestic lion watching a graceful, curious horse approach, with soft, warm light and detailed expressions."
      },
      {
        image: "scene5.jpg",
        content: `
          <p>"You are strange," the lion said, his voice deep like thunder. "You do not fear me?"</p>
          <p>The horse snorted, flicking her tail. "Why should I?"</p>
          <p>"Because I am the strongest animal in history," the lion declared. "My roar alone has sent armies running."</p>
          <p>The horse tilted her head. "Maybe. But your roar does not move me."</p>
        `
        // AI Prompt for scene5: "A modern, playful digital illustration in a children’s book style capturing an expressive conversation between a powerful lion and a confident, spirited horse in a vibrant savanna setting."
      },
      {
        image: "scene6.jpg",
        content: `
          <p>For the first time in a long while, the lion found himself at a loss for words. No one had ever spoken to him like this.</p>
          <p>Instead of answering, he stood, stretching his powerful frame. "Then what does move you?"</p>
        `
        // AI Prompt for scene6: "A thoughtful digital illustration in a modern children’s book style of a regal lion, looking surprised and contemplative beneath an ancient tree, with soft, gentle lighting."
      },
      {
        image: "scene7.jpg",
        content: `
          <p>"The wind. The sky. The road ahead," she said simply. "Strength isn’t about being feared. It’s about moving forward."</p>
          <p>The lion huffed. "Forward to what? A life of running away?"</p>
          <p>"Not running away," the horse corrected, stepping closer. "Running toward something greater."</p>
        `
        // AI Prompt for scene7: "A detailed digital drawing in a children’s book style showing a gentle, wise horse speaking passionately about freedom and movement, with soft breezy backgrounds and modern digital details."
      },
      {
        image: "scene8.jpg",
        content: `
          <p>The lion narrowed his eyes. He had spent his life standing still, being the ruler of a land that had long since stopped needing a ruler. The idea of chasing something new—of moving—was foreign to him. But in her words, there was a challenge, one that pulled at something deep inside him.</p>
        `
        // AI Prompt for scene8: "A modern digital illustration in a children’s book style of a lion with a determined yet uncertain expression, set against a warm, vibrant savanna that suggests new challenges ahead."
      },
      {
        image: "scene9.jpg",
        content: `
          <p>"Then show me," he said.</p>
        `
        // AI Prompt for scene9: "A close-up modern digital drawing in a children’s book style focusing on the lion’s determined expression as he challenges the world, with bold colors and dynamic details."
      },
      {
        image: "scene10.jpg",
        content: `
          <p>And so, the strongest animal in history and the strongest animal of today began to walk together.</p>
        `
        // AI Prompt for scene10: "A warm digital illustration in a modern children’s book style showing a lion and a horse beginning to walk side by side along a picturesque landscape, full of gentle, inviting colors."
      },
      {
        image: "scene11.jpg",
        content: `
          <p>At first, the lion moved slow, his body built for strength, not speed. The horse would trot ahead, only to turn back and wait for him.</p>
        `
        // AI Prompt for scene11: "A tender modern digital drawing in a children’s book style capturing the gentle pace of a lion and a horse on a journey, with soft movement and a friendly atmosphere."
      },
      {
        image: "scene12.jpg",
        content: `
          <p>"You are too fast," the lion growled.</p>
          <p>"You are too slow," the horse replied with a playful smirk.</p>
          <p>The lion bared his fangs. "I am not slow!"</p>
          <p>"Then prove it," the horse said, flicking her tail before breaking into a run.</p>
        `
        // AI Prompt for scene12: "A playful and dynamic modern digital illustration in a children’s book style showing a teasing exchange between a proud lion and a spirited horse, rendered with vibrant colors and expressive details."
      },
      {
        image: "scene13.jpg",
        interactive: "chase",
        content: `
          <p>Something inside the lion stirred—pride, excitement, frustration. With a powerful leap, he pushed himself forward. His paws thundered against the ground. His muscles burned in a way they had not in years.</p>
          <p>And for the first time in a long time… he chased.</p>
          <p>The horse laughed as she galloped, weaving through the trees, feeling the wind rush past her mane. The lion roared, but this time it was not a sound of dominance. It was something different—something alive.</p>
          <p>Click the "Run" button repeatedly to help the lion chase the horse!</p>
          <div id="chaseCounter">0</div>
          <button id="runBtn">Run!</button>
          <div id="chaseMessage" style="display:none; margin-top:10px;">Chase complete!</div>
        `
        // AI Prompt for scene13: "A dynamic, action-packed modern digital illustration in a children’s book style capturing the thrill of a chase—a powerful lion leaping forward while a joyful horse gallops away amid a lush, animated landscape."
      },
      {
        image: "scene14.jpg",
        content: `
          <p>They ran until the sun dipped below the horizon, until the stars blinked awake in the sky. And when they finally stopped, side by side, panting but smiling, the lion looked at the horse and asked, "What now?"</p>
        `
        // AI Prompt for scene14: "A warm, atmospheric digital illustration in a modern children’s book style of a lion and a horse resting together at sunset, with vibrant oranges and purples filling the sky and a gentle, reflective mood."
      },
      {
        image: "scene15.jpg",
        content: `
          <p>The horse smiled, "Now, we see how far we can go."</p>
        `
        // AI Prompt for scene15: "A tender modern digital drawing in a children’s book style showing a smiling horse with a hopeful expression, set against a softly lit twilight background with modern, detailed charm."
      },
      {
        image: "scene16.jpg",
        content: `
          <p>And so, they did.</p>
        `
        // AI Prompt for scene16: "A simple, optimistic digital illustration in a modern children’s book style depicting the lion and the horse moving forward together, with gentle, uplifting colors and a sense of adventure."
      },
      {
        image: "scene17.jpg",
        content: `
          <p>The strongest animal in history and the strongest animal of today, two creatures who could not have been more different, ran together beneath the endless sky. Not as predator and prey. Not as rivals.</p>
          <p>But as something greater.</p>
          <p>As friends.</p>
        `
        // AI Prompt for scene17: "A heartwarming modern digital illustration in a children’s book style of a lion and a horse resting side by side under a vast, starry sky, evoking friendship and unity with soft, detailed artistry."
      }
    ];

    // Function to update the global background effects based on slider values.
    function updateBackgroundEffects() {
      const zoomVal = document.getElementById('zoomSlider').value;
      const blurVal = document.getElementById('blurSlider').value;
      const noiseVal = document.getElementById('noiseSlider').value;
      const globalBg = document.getElementById('globalBackground');
      const globalNoise = document.getElementById('globalNoise');
      
      // Update background zoom via background-size.
      globalBg.style.backgroundSize = (zoomVal * 100) + "%";
      // Update blur filter.
      globalBg.style.filter = `blur(${blurVal}px)`;
      // Update noise overlay opacity.
      globalNoise.style.opacity = noiseVal;
    }

    // Attach event listeners to sliders.
    document.getElementById('zoomSlider').addEventListener('input', updateBackgroundEffects);
    document.getElementById('blurSlider').addEventListener('input', updateBackgroundEffects);
    document.getElementById('noiseSlider').addEventListener('input', updateBackgroundEffects);

    // Function to render a scene.
    function showScene(index) {
      currentScene = index;
      const gameDiv = document.getElementById("game");
      const sceneObj = scenes[index];
      
      // Update the global background image to the current scene image.
      document.getElementById('globalBackground').style.backgroundImage = `url('${sceneObj.image}')`;
      
      // Reset chaseComplete if not in the chase scene.
      if (sceneObj.interactive !== "chase") {
        chaseComplete = false;
      }
      let html = `<div class="scene">`;
      // Foreground scene image.
      html += `<img src="${sceneObj.image}" class="scene-img" alt="Scene Image">`;
      // Scene text content.
      html += `<div class="scene-content">${sceneObj.content}</div>`;
      // Navigation buttons, locked to the bottom.
      html += `<div class="nav-buttons">`;
      if (index > 0) {
        html += `<button id="prevBtn">
          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><polyline points="11 18 5 12 11 6"/></svg>
        </button>`;
      }
      if (index < scenes.length - 1) {
        if (sceneObj.interactive === "chase" && !chaseComplete) {
          html += `<button id="nextBtn" disabled>
            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><polyline points="9 18 15 12 9 6"/></svg>
          </button>`;
        } else {
          html += `<button id="nextBtn">
            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><polyline points="9 18 15 12 9 6"/></svg>
          </button>`;
        }
      } else {
        html += `<button id="restartBtn">Restart Adventure</button>`;
      }
      html += `</div></div>`;
      gameDiv.innerHTML = html;
      
      // Attach navigation event listeners.
      const prevBtn = document.getElementById("prevBtn");
      const nextBtn = document.getElementById("nextBtn");
      const restartBtn = document.getElementById("restartBtn");
      if (prevBtn) {
        prevBtn.addEventListener("click", () => showScene(index - 1));
      }
      if (nextBtn) {
        nextBtn.addEventListener("click", () => showScene(index + 1));
      }
      if (restartBtn) {
        restartBtn.addEventListener("click", () => {
          chaseComplete = false;
          showScene(0);
        });
      }
      
      // Special handling for the chase minigame.
      if (sceneObj.interactive === "chase") {
        let chaseClicks = 0;
        const threshold = 20;
        const runBtn = document.getElementById("runBtn");
        runBtn.addEventListener("click", () => {
          chaseClicks++;
          document.getElementById("chaseCounter").innerText = chaseClicks;
          if (chaseClicks >= threshold) {
            document.getElementById("chaseMessage").style.display = "block";
            chaseComplete = true;
            const nextBtn = document.getElementById("nextBtn");
            if (nextBtn) nextBtn.disabled = false;
          }
        });
      }
      
      // Update background effects with current slider values.
      updateBackgroundEffects();
    }
    
    // Start the adventure at the title scene.
    showScene(0);
  </script>
</body>
</html>
